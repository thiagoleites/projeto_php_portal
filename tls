#!/usr/bin/env php
<?php

$argv = $_SERVER['argv'];
$argc = $_SERVER['argc'];

if ($argc < 2) {
    echo "Uso: php cli.php comando:ação Nome\n";
    exit(1);
}

$comandoCompleto = $argv[1]; // exemplo: create:model
$parametro = $argv[2] ?? null;

[$comando, $acao] = explode(':', $comandoCompleto);

$classeComando = ucfirst($comando) . ucfirst($acao) . 'Command';
$caminhoClasse = __DIR__ . '/commands/' . $classeComando . '.php';

if (!file_exists($caminhoClasse)) {
    echo "Comando não encontrado: $comando:$acao\n";
    exit(1);
}

require_once $caminhoClasse;

if (!class_exists($classeComando)) {
    echo "Classe $classeComando não existe.\n";
    exit(1);
}

$cmd = new $classeComando();
$cmd->handle($parametro);
